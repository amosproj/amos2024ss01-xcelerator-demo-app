generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model TimeSeriesItem {
    entityId        String // Example: Pump-002 - id
    propertySetName String // Example: Environment | PumpData

    data TimeSeriesDataItem[]

    @@id([entityId, propertySetName])
    @@unique([entityId, propertySetName])
}

model TimeSeriesDataItem {
    time DateTime
    data Json?

    // Foreign keys
    timeSeriesItementityId        String
    timeSeriesItempropertySetName String
    timeSeriesItem                TimeSeriesItem @relation(fields: [timeSeriesItementityId, timeSeriesItempropertySetName], references: [entityId, propertySetName])

    @@id([timeSeriesItementityId, timeSeriesItempropertySetName, time])
}

// TODO: Add User model + relation
// TODO: Save dueDate as DateTime
model Case {
    id           Int    @id @default(autoincrement())
    handle       String
    dueDate      String // see https://stackoverflow.com/a/52823241
    title        String 
    type         String
    status       String
    // assignedTo   User   @relation(fields: [assignedToId], references: [id])
    // assignedToId Int
    description  String
    source       String
    priority     String
    createdBy    String
    createdDate  DateTime
    eTag         String
    modifiedBy   String
    modifiedDate DateTime
    overdue      Boolean
}