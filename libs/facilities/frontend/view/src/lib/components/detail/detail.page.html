@if (facility(); as facility) {
<ix-content>
    <div class="details-grid gap-x-6 gap-y-4 pb-32">

        @if(this.pumpChart(); as pumpChart){
            <div echarts [options]="pumpChart" [theme]="theme"></div>
        }
        @if(this.envChart(); as envChart){
            <div echarts [options]="envChart" [theme]="theme"></div>
        }

        <ix-card variant="insight" class="h-full w-full p-4">
            <ix-card-content>
                <ix-card-title>
                    <ix-icon class="icon" name="{{facility.icon}}"></ix-icon>
                    <span class="notification text-2xl">Basic information</span>
                </ix-card-title>
                <ix-typography color="std">{{ facility.heading }}</ix-typography>
                <ix-typography color="std">{{ facility.subheading }}</ix-typography>
                <ix-typography color="std">{{ facility.location }}</ix-typography>
                <div class="flex">
                    <ix-typography color="std">status:&nbsp;</ix-typography>
                    <ix-typography [ngClass]="StatusToColorRecord[facility.status]">{{ facility.status }}
                    </ix-typography>
                </div>
            </ix-card-content>
        </ix-card>

        <ix-card variant="insight" class="h-full w-full p-4">
            <ix-card-content>
                <ix-card-title>
                    <ix-icon class="icon" name="tasks-open"></ix-icon>
                    <span class="notification text-2xl">3</span>
                </ix-card-title>
                <ix-typography color="std" format="h4"> Open Cases </ix-typography>
                <ix-typography color="std">
                    There are 3 open cases regarding this facility
                </ix-typography>
                <div class="mt-auto p-2">
                    <ix-button routerLink="/cases/create"> New Case </ix-button>
                </div>
            </ix-card-content>
        </ix-card>

        <ix-card variant="insight" class="h-full w-full p-4">
            <ix-card-content>
                <ix-card-title>
                    <ix-icon
                        class="icon"
                        [name]="locked() ? 'lock-filled' : 'unlock-filled'"
                    ></ix-icon>
                </ix-card-title>
                <ix-typography color="std" format="h4">
                    {{ locked() ? 'Unlock the doors' : 'Lock the doors' }}
                </ix-typography>
                <ix-typography color="std">
                    {{ locked() ? 'Currently the doors are locked' :
                    'Currently the doors are unlocked' }}
                </ix-typography>

                <div class="mt-auto p-2">
                    <ix-button (click)="changeLocked()">
                        {{ locked() ? 'Unlock the doors' : 'Lock the doors' }}
                    </ix-button>
                </div>
            </ix-card-content>
        </ix-card>

        <ix-card variant="insight" class="h-full w-full p-4">
            <ix-card-content>
                <ix-card-title>
                    <ix-icon class="icon" name="earth-filled"></ix-icon>
                    <span class="notification text-2xl">80%</span>
                </ix-card-title>
                <ix-typography color="std" format="h4"> Eco Score (SiGreen)</ix-typography>
                <ix-typography color="std">
                    According to SiGreen this facility has an eco score of 80%
                </ix-typography>
            </ix-card-content>
        </ix-card>
    </div>
</ix-content>

}
